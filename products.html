<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Products</title>
</head>
<body>

<h1>Welcome, <span id="userEmail"></span></h1>

<div id="productList">
  <!-- Example products -->
  <div>
    <strong>Laptop</strong> - $999.99
    <button onclick="addToCart('1', 'Laptop', 999.99)">Add to Cart</button>
  </div>
  <div>
    <strong>Phone</strong> - $499.99
    <button onclick="addToCart('2', 'Phone', 499.99)">Add to Cart</button>
  </div>
  <div>
    <strong>Headphones</strong> - $199.99
    <button onclick="addToCart('3', 'Headphones', 199.99)">Add to Cart</button>
  </div>
</div>

<button id="viewCartBtn">View Cart</button>

<script>
  // User email stored somewhere (maybe from login)
  const userEmail = localStorage.getItem('user_email') || 'testuser@example.com';
  document.getElementById('userEmail').textContent = userEmail;

  const cartKey = 'cart_items_' + userEmail;

  function addToCart(id, name, price) {
    let cart = JSON.parse(localStorage.getItem(cartKey)) || [];

    // Check if item exists
    const existingItem = cart.find(item => item.id === id);
    if (existingItem) {
      existingItem.quantity += 1;  // increase quantity
    } else {
      cart.push({ id, name, price, quantity: 1 });
    }

    localStorage.setItem(cartKey, JSON.stringify(cart));
    alert(`Added ${name} to cart!`);
  }

  document.getElementById('viewCartBtn').addEventListener('click', function() {
    window.location.href = 'cart.html';
  });
</script>

</body>
</html>
